# Datasource (H2 in-memory)
quarkus.datasource.db-kind=h2
quarkus.datasource.username=sa
quarkus.datasource.password=
quarkus.datasource.jdbc.url=jdbc:h2:mem:ordersdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE

# Hibernate
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=true

# H2 Console (works only with quarkus-h2 extension)
quarkus.h2.console.enabled=true
quarkus.h2.console.path=/h2


quarkus.http.port=8080

# ========================================
# Kafka Configuration for Saga Orchestration
# ========================================

# Kafka Broker (Docker container)
# Use localhost:9092 when running locally
# Use kafka:9092 when Order Service is also in Docker network
kafka.bootstrap.servers=localhost:9092

# ========================================
# Outgoing Channels (Order Service -> Other Services)
# ========================================

# Pricing Service - Request
mp.messaging.outgoing.pricing-requests.connector=smallrye-kafka
mp.messaging.outgoing.pricing-requests.topic=pricing-requests
mp.messaging.outgoing.pricing-requests.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

# Inventory Service - Request
mp.messaging.outgoing.inventory-requests.connector=smallrye-kafka
mp.messaging.outgoing.inventory-requests.topic=inventory-requests
mp.messaging.outgoing.inventory-requests.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

# Payment Service - Request
mp.messaging.outgoing.payment-requests.connector=smallrye-kafka
mp.messaging.outgoing.payment-requests.topic=payment-requests
mp.messaging.outgoing.payment-requests.value.serializer=org.apache.kafka.common.serialization.StringSerializer

# Stock Service - Request
mp.messaging.outgoing.stock-requests.connector=smallrye-kafka
mp.messaging.outgoing.stock-requests.topic=stock-requests
mp.messaging.outgoing.stock-requests.value.serializer=org.apache.kafka.common.serialization.StringSerializer

# Notification Service - Request
mp.messaging.outgoing.notification-requests.connector=smallrye-kafka
mp.messaging.outgoing.notification-requests.topic=notification-requests
mp.messaging.outgoing.notification-requests.value.serializer=org.apache.kafka.common.serialization.StringSerializer

# Manier Service - Request
mp.messaging.outgoing.manier-requests.connector=smallrye-kafka
mp.messaging.outgoing.manier-requests.topic=manier-requests
mp.messaging.outgoing.manier-requests.value.serializer=org.apache.kafka.common.serialization.StringSerializer

# ========================================
# Incoming Channels (Other Services -> Order Service)
# ========================================

# Pricing Service - Response
mp.messaging.incoming.pricing-responses.connector=smallrye-kafka
mp.messaging.incoming.pricing-responses.topic=pricing-responses
mp.messaging.incoming.pricing-responses.value.deserializer=io.quarkus.kafka.client.serialization.ObjectMapperDeserializer
mp.messaging.incoming.pricing-responses.group.id=order-service-pricing-group
mp.messaging.incoming.pricing-responses.auto.offset.reset=earliest

# Inventory Service - Response
mp.messaging.incoming.inventory-responses.connector=smallrye-kafka
mp.messaging.incoming.inventory-responses.topic=inventory-responses
mp.messaging.incoming.inventory-responses.value.deserializer=io.quarkus.kafka.client.serialization.ObjectMapperDeserializer
mp.messaging.incoming.inventory-responses.group.id=order-service-inventory-group
mp.messaging.incoming.inventory-responses.auto.offset.reset=earliest

# Payment Service - Response
mp.messaging.incoming.payment-responses.connector=smallrye-kafka
mp.messaging.incoming.payment-responses.topic=payment-responses
mp.messaging.incoming.payment-responses.value.deserializer=org.apache.kafka.common.serialization.StringDeserializer
mp.messaging.incoming.payment-responses.group.id=order-service-payment-group
mp.messaging.incoming.payment-responses.auto.offset.reset=earliest

# Stock Service - Response
mp.messaging.incoming.stock-responses.connector=smallrye-kafka
mp.messaging.incoming.stock-responses.topic=stock-responses
mp.messaging.incoming.stock-responses.value.deserializer=org.apache.kafka.common.serialization.StringDeserializer
mp.messaging.incoming.stock-responses.group.id=order-service-stock-group
mp.messaging.incoming.stock-responses.auto.offset.reset=earliest

# Notification Service - Response
mp.messaging.incoming.notification-responses.connector=smallrye-kafka
mp.messaging.incoming.notification-responses.topic=notification-responses
mp.messaging.incoming.notification-responses.value.deserializer=org.apache.kafka.common.serialization.StringDeserializer
mp.messaging.incoming.notification-responses.group.id=order-service-notification-group
mp.messaging.incoming.notification-responses.auto.offset.reset=earliest

# Manier Service - Response
mp.messaging.incoming.manier-responses.connector=smallrye-kafka
mp.messaging.incoming.manier-responses.topic=manier-responses
mp.messaging.incoming.manier-responses.value.deserializer=org.apache.kafka.common.serialization.StringDeserializer
mp.messaging.incoming.manier-responses.group.id=order-service-manier-group
mp.messaging.incoming.manier-responses.auto.offset.reset=earliest

