# Datasource (H2 in-memory)
quarkus.datasource.db-kind=h2
quarkus.datasource.username=sa
quarkus.datasource.password=
quarkus.datasource.jdbc.url=jdbc:h2:mem:ordersdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE

# Hibernate
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=true

# H2 Console (works only with quarkus-h2 extension)
quarkus.h2.console.enabled=true
quarkus.h2.console.path=/h2

quarkus.http.port=8080

# ========================================
# OpenAPI / Swagger Configuration
# ========================================
quarkus.smallrye-openapi.path=/openapi
# Swagger UI only in dev mode (disabled in production)
%dev.quarkus.swagger-ui.always-include=true
%dev.quarkus.swagger-ui.path=/q/swagger-ui
%prod.quarkus.swagger-ui.always-include=false
mp.openapi.extensions.smallrye.info.title=Order Service API
mp.openapi.extensions.smallrye.info.version=1.0.0
mp.openapi.extensions.smallrye.info.description=REST API for managing orders in the e-commerce platform with saga orchestration
mp.openapi.extensions.smallrye.info.contact.name=ENIT SOA Team
mp.openapi.extensions.smallrye.info.contact.email=support@enit.tn

# ========================================
# Kafka Configuration for Saga Orchestration
# ========================================

# Kafka Broker (Docker container)
# Use localhost:9092 when running locally
# Use kafka:9092 when Order Service is also in Docker network
kafka.bootstrap.servers=localhost:9092

# ========================================
# Outgoing Channels (Order Service -> Other Services)
# ========================================

# Pricing Service - Request
mp.messaging.outgoing.pricing-requests.connector=smallrye-kafka
mp.messaging.outgoing.pricing-requests.topic=pricing-requests
mp.messaging.outgoing.pricing-requests.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

# Inventory Service - Request
mp.messaging.outgoing.inventory-requests.connector=smallrye-kafka
mp.messaging.outgoing.inventory-requests.topic=inventory-requests
mp.messaging.outgoing.inventory-requests.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

# Card Validation Service - Request
mp.messaging.outgoing.card-validation-requests.connector=smallrye-kafka
mp.messaging.outgoing.card-validation-requests.topic=card-validation-requests
mp.messaging.outgoing.card-validation-requests.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

# Payment Service - Request
mp.messaging.outgoing.payment-requests.connector=smallrye-kafka
mp.messaging.outgoing.payment-requests.topic=payment-requests
mp.messaging.outgoing.payment-requests.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

# Delivery Service - Request
mp.messaging.outgoing.delivery-requests.connector=smallrye-kafka
mp.messaging.outgoing.delivery-requests.topic=delivery-requests
mp.messaging.outgoing.delivery-requests.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

# Notification Service
mp.messaging.outgoing.notifications.connector=smallrye-kafka
mp.messaging.outgoing.notifications.topic=notifications
mp.messaging.outgoing.notifications.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

# ========================================
# Incoming Channels (Other Services -> Order Service)
# ========================================

# Pricing Service - Response
mp.messaging.incoming.pricing-responses.connector=smallrye-kafka
mp.messaging.incoming.pricing-responses.topic=pricing-responses
mp.messaging.incoming.pricing-responses.value.deserializer=io.quarkus.kafka.client.serialization.ObjectMapperDeserializer
mp.messaging.incoming.pricing-responses.group.id=order-service-pricing-group
mp.messaging.incoming.pricing-responses.auto.offset.reset=earliest

# Inventory Service - Response
mp.messaging.incoming.inventory-responses.connector=smallrye-kafka
mp.messaging.incoming.inventory-responses.topic=inventory-responses
mp.messaging.incoming.inventory-responses.value.deserializer=io.quarkus.kafka.client.serialization.ObjectMapperDeserializer
mp.messaging.incoming.inventory-responses.group.id=order-service-inventory-group
mp.messaging.incoming.inventory-responses.auto.offset.reset=earliest

# Card Validation Service - Response
mp.messaging.incoming.card-validation-responses.connector=smallrye-kafka
mp.messaging.incoming.card-validation-responses.topic=card-validation-responses
mp.messaging.incoming.card-validation-responses.value.deserializer=io.quarkus.kafka.client.serialization.ObjectMapperDeserializer
mp.messaging.incoming.card-validation-responses.group.id=order-service-card-validation-group
mp.messaging.incoming.card-validation-responses.auto.offset.reset=earliest

# Payment Service - Response
mp.messaging.incoming.payment-responses.connector=smallrye-kafka
mp.messaging.incoming.payment-responses.topic=payment-responses
mp.messaging.incoming.payment-responses.value.deserializer=io.quarkus.kafka.client.serialization.ObjectMapperDeserializer
mp.messaging.incoming.payment-responses.group.id=order-service-payment-group
mp.messaging.incoming.payment-responses.auto.offset.reset=earliest

# Delivery Service - Response
mp.messaging.incoming.delivery-responses.connector=smallrye-kafka
mp.messaging.incoming.delivery-responses.topic=delivery-responses
mp.messaging.incoming.delivery-responses.value.deserializer=io.quarkus.kafka.client.serialization.ObjectMapperDeserializer
mp.messaging.incoming.delivery-responses.group.id=order-service-delivery-group
mp.messaging.incoming.delivery-responses.auto.offset.reset=earliest

